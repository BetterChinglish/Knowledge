[toc]



# something about working for Huawei-SCT


## 前言

再有一周时间，便是来华为做sct一周年了，上周末写了点开发路上遇到的问题以及对应的解决措施的总结

但其间我始终有种念头，是不是真的我不太行。

sct是华为的智能报价工具，处于整个业务承上启下的重要节骨眼上

上面是各种产品、机会点什么的基本盘，下面面向各种不同客户，sct准确点来说是UniSTAR SCT，sct即为smart configuration tool，我们更喜欢称其为智能配置报价工具，即便英文名没有报价之意

其实从名字上也大概猜出sct是干什么的了，简单点说就是选产品、配配置、生成报价单，然后最后拿去竞标呗。

光从这里听上去确实很简单，我刚毕业都能做出一个简单的购物商场的，既然是购物的那还不是异曲同工？

起初，我也是这样认为的，但事情往往不向预期发展


## 为何复杂

第一次看sct网站，还是导师教我们起工程、顺带简介我们的主网

那时只是简单讲了下我们组负责的模块，我并不觉得有多难，但当培训结束后我自己点开网站时，便发现事情没有那么简单。

既然是类似商城的玩意，那肯定先看产品咯。


### 产品列表

点开产品一看，怎么说呢，产品类别就挺多的了，左边slide两棵树选择产品族、产品线、产品系列，右边主要内容区域分为top，filter，和content，top也是选择类型，filter则是根据条件过滤，content显示最终产品。

这么乍一听好像也不难，确实，但如果我说不同的产品族、产品线、产品系列的top、filter可能不同呢？

简单贴个图吧

![1724210439387](image/readme/1724210439387.png)

最左边的那棵树，也就是产品族，可以理解为华为不同事业部，产品线则是不同类别的产品，产品系列类似mate系列与p系列的区别

其实到这里可见一斑了，但其实这是最简单的页面之一，因为分支结构并不复杂，也只有固定的几个层级，只是多而已。

但是想想这里还有产品对比功能，点进去还有产品详情，不同类型的产品的显示结构也可能不同；显示的模块也不同；甚至在不同国家下，模块显示与否也不同；加入购物车的校验也不同，包括前端校验和后端校验；

好，这是最简单的一个产品列表而已。

接下来我们看看产品配置


### 产品配置

随便点一个产品进入产品详情，这里就有产品配置，可能难度跨越的有点大

这里就不放图了，简单说一下吧，这里的产品我指的是设备，sct基本上面向的是运营商和大企业客户，一个产品类似于最简单的路由器，包括了基本配置、电源、光模块、光电缆、辅料、附件

也就是说，基本上一个路由器从头到尾你可以选配，从用的什么线，到路由器使用的软件，有些产品的参数设置能有数百行

而这数百行又可能有冲突，比如某种规格选了a，另外的规格的可选项就会随之改变；或是某种规格选了b，一些c、d规格就不能选这样

而购物车只是暂存选了的产品的，最终目的是生成报价单，选择产品生成报价单，或是报价单添加产品，一个报价单可能有多个产品，而多个产品之间也可能有冲突（不过这就涉及另外一种报价单了，叫做解决方案）

为了解决这些冲突，有专门的算法团队对这些进行处理，为每种产品生成算法包，但是前端表格还是很复杂。一个表格的cellType（类实现）能继承四五层。

而且，产品配置页面的表格需要支持多种情况，可能不同国家、不同类型的报价单、不同领域的产品、不同场景进入可能都有不同。

不同国家、不同类型的报价单什么的进来可能不同可以理解，不同场景进来又是什么意思？可编辑和只读场景？并不只是这点，这还得从他的架构说起



### 微组件架构

华为将带有业务逻辑的组件成为微组件，与微前端不同，微组件是为了复用各种组件，以此保留原事业部现有代码，以便接入erp便于管理，微组件架构依赖基座运行时环境，统一的环境配置能够使得不同事业部的组件能够在不同的地方进行复用，这又是因为客户有一定的技术能力，能够按照自己的需求打造自己的页面，也就是不同的业务组件（微组件），通过统一的平台（灵雀-类低代码平台）进行编排形成新的页面，其实提供给客户的就是所谓的组件与元数据接口。

类似的，sct也有这样的操作，将组件打包后给其他团队在他们的页面上使用，这要求sct团队能够支持不同场景，不同场景也就是不同团队的不同的项目下，有一些特殊的逻辑存在。


## 捋一下需要控制的条件

如标题，让我们大致捋一下不完全统计的条件

>  国家
>
> 报价单情况
>
> 拟稿报价单与提交报价单-拟稿与发布
>
> 编辑与只读
>
> 一般报价单与解决方案报价单
>
> 产品类型与产品所属

如上是基础要控制的条件, 当你实现一个功能例如按钮是否可以点击, 可能本身存在基本的逻辑, 在这些逻辑之上你还要先看看我列出来的这些逻辑



## 额外导致复杂的

上面不同的boss都有一个相同的话题, 保障质量. 产品经理也说过, 项目年流水超千亿, 不要因为你的一个bug影响企业的报价导致错过竞标错过单子.

所以这个项目是即为重要的, 但是华为却选择了外包出去。而即便是如今，招的是od，带点愚蠢的压榨。

写的代码垃圾也就算了。更多是：

奇怪的实现逻辑, 没有注释的代码, 没有统一的规范，变量取名意义不清，工具方法使用混乱，功能使用混乱，没有业务完整的、可信的业务规范，没有接口文档，没有业务规格。

细的就不多说了，后面上总结的时候提到的规范自然就是这里遇到过的问题。
